---
import MegaMenuItem from './MegaMenuItem.astro';

interface Props {
  lang: string;
}

const { lang } = Astro.props;
---

<nav class="hidden lg:flex items-center space-x-8">
  <!-- Aprende -->
  <MegaMenuItem 
    title="Aprende"
    href={`/${lang}/aprende`}
    sections={[
      {
        title: "Fundamentos DeSci",
        items: [
          { name: "¿Qué es la Ciencia Descentralizada?", href: `/${lang}/aprende/que-es-desci`, desc: "Introducción completa al mundo DeSci" },
          { name: "DeSci vs Ciencia Tradicional", href: `/${lang}/aprende/desci-vs-tradicional`, desc: "Comparativa detallada de ambos modelos" },
          { name: "Historia y Evolución", href: `/${lang}/aprende/historia-desci`, desc: "De dónde venimos y hacia dónde vamos" }
        ]
      },
      {
        title: "Guías por Rol",
        items: [
          { name: "Para Investigadores", href: `/${lang}/aprende/para-investigadores`, desc: "Guía para científicos establecidos" },
          { name: "Para Estudiantes", href: `/${lang}/aprende/para-estudiantes`, desc: "Tu introducción al futuro científico" },
          { name: "Para Desarrolladores", href: `/${lang}/aprende/para-desarrolladores`, desc: "Construye el futuro DeSci" }
        ]
      },
      {
        title: "Recursos Prácticos",
        items: [
          { name: "Glosario DeSci", href: `/${lang}/aprende/glosario`, desc: "Todos los términos explicados" },
          { name: "FAQ Completo", href: `/${lang}/aprende/faq`, desc: "Preguntas más frecuentes" }
        ]
      }
    ]}
    icon="book"
  />

  <!-- Explora -->
  <MegaMenuItem 
    title="Explora"
    href={`/${lang}/explora`}
    sections={[
      {
        title: "Por Categoría",
        items: [
          { name: "💰 Financiamiento", href: `/${lang}/explora/financiamiento`, desc: "15 herramientas para fondear investigación" },
          { name: "📝 Publicación", href: `/${lang}/explora/publicacion`, desc: "12 plataformas para publicar" },
          { name: "🤝 Colaboración", href: `/${lang}/explora/colaboracion`, desc: "10 plataformas para trabajar en equipo" }
        ]
      },
      {
        title: "Por Caso de Uso",
        items: [
          { name: "Financiar Investigación", href: `/${lang}/explora/financiar-investigacion`, desc: "Estrategias de financiamiento" },
          { name: "Publicar Libremente", href: `/${lang}/explora/publicar-libre`, desc: "Sin peer review tradicional" }
        ]
      },
      {
        title: "Ecosystem Map",
        items: [
          { name: "Mapa Interactivo", href: `/${lang}/explora/mapa-interactivo`, desc: "Visualiza el ecosistema completo" },
          { name: "Trending Projects", href: `/${lang}/explora/trending`, desc: "Los más prometedores" }
        ]
      }
    ]}
    icon="search"
  />

  <!-- Conecta -->
  <MegaMenuItem 
    title="Conecta"
    href={`/${lang}/conecta`}
    sections={[
      {
        title: "Eventos DeSci",
        items: [
          { name: "Webinars Mensuales", href: `/${lang}/conecta/webinars`, desc: "Último jueves, 15:00 GMT-3" },
          { name: "Workshops", href: `/${lang}/conecta/workshops`, desc: "Aprende usando herramientas reales" }
        ]
      },
      {
        title: "Mentoría",
        items: [
          { name: "Programa Mentorship", href: `/${lang}/conecta/mentorship`, desc: "6 meses de acompañamiento" },
          { name: "Office Hours", href: `/${lang}/conecta/office-hours`, desc: "Consultas con expertos" }
        ]
      },
      {
        title: "Comunidad",
        items: [
          { name: "Discord", href: `/${lang}/conecta/discord`, desc: "2,000+ científicos activos" },
          { name: "Grupos Regionales", href: `/${lang}/conecta/grupos-regionales`, desc: "Comunidades por país" }
        ]
      }
    ]}
    icon="users"
  />

  <!-- Research -->
  <MegaMenuItem 
    title="Research"
    href={`/${lang}/research`}
    sections={[
      {
        title: "Papers Originales",
        items: [
          { name: "Estado DeSci LatAm 2025", href: `/${lang}/research/estado-desci-latam-2025`, desc: "Análisis completo del ecosistema" },
          { name: "Impacto Descentralización", href: `/${lang}/research/impacto-descentralizacion`, desc: "Métricas y casos de estudio" }
        ]
      },
      {
        title: "Análisis Ecosistema",
        items: [
          { name: "Market Reports", href: `/${lang}/research/market-reports`, desc: "Análisis trimestral" },
          { name: "Métricas Adopción", href: `/${lang}/research/adoption-metrics`, desc: "Datos globales DeSci" }
        ]
      },
      {
        title: "Casos de Estudio",
        items: [
          { name: "Success Stories", href: `/${lang}/research/success-stories`, desc: "Científicos exitosos en DeSci" },
          { name: "Best Practices", href: `/${lang}/research/best-practices`, desc: "Metodologías probadas" }
        ]
      }
    ]}
    icon="document"
  />

  <!-- Language & CTAs -->
  <div class="flex items-center space-x-4 ml-8">
    <!-- Language Selector -->
    <div class="language-selector">
      <button class="language-trigger">
        <span class="text-sm font-medium text-foreground/80">{lang.toUpperCase()}</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-foreground/60" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      
      <div class="language-dropdown">
        <a href="/es/" class={`language-option ${lang === 'es' ? 'active' : ''}`}>
          🇪🇸 Español
        </a>
        <a href="/en/" class={`language-option ${lang === 'en' ? 'active' : ''}`}>
          🇺🇸 English
        </a>
        <a href="/pt/" class={`language-option ${lang === 'pt' ? 'active' : ''}`}>
          🇧🇷 Português
        </a>
      </div>
    </div>
    
    <!-- CTAs -->
    <a href={`/${lang}/comunidad`} class="text-foreground/80 hover:text-primary font-medium transition-colors">
      Comunidad
    </a>
    <a href={`/${lang}/comenzar`} class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg font-medium transition-colors">
      Comenzar
    </a>
  </div>
</nav>

<style>
  /* Language Selector */
  .language-selector {
    @apply relative;
  }

  .language-trigger {
    @apply flex items-center space-x-1 px-3 py-2 rounded-lg hover:bg-neutral-light transition-colors;
  }

  .language-dropdown {
    @apply absolute right-0 top-full mt-2 w-40 bg-white rounded-xl shadow-lg border border-gray-200 p-2 opacity-0 invisible transition-all duration-200;
  }

  .language-selector:hover .language-dropdown {
    @apply opacity-100 visible;
  }

  .language-option {
    @apply block px-3 py-2 rounded-lg text-sm hover:bg-neutral-light transition-colors;
  }

  .language-option.active {
    @apply bg-primary/10 text-primary font-medium;
  }
</style>